<html lang="ko">
<head>
 <meta charset="utf-8" />
 <meta name="viewport" content="width=device-width,initial-scale=1" />
 <title>{% block title %}SOMS{% endblock %}</title>

 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
 <!-- 기존 CSS 링크 아래에 추가 -->
 <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
 <link href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" rel="stylesheet" />

 <!-- Pretendard (Korean-friendly modern UI font) -->
 <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@latest/dist/web/static/pretendard.css" />

 <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">

 <link href="{{ url_for('static', filename='css/soms.css') }}" rel="stylesheet">
</head>
<body class="soms-bg">
 <div class="d-flex">
 <aside class="soms-sidebar">
 <div class="soms-brand">
 <div class="title fs-5">SOMS</div>
 <div class="subtitle">Operations Console</div>
 </div>

 <nav class="px-1 pb-3">
 <a class="soms-navlink {% if request.endpoint and request.endpoint.startswith('dashboard.') %}is-active{% endif %}"
 href="{{ url_for('dashboard.index') }}">
 <span>Dashboard</span>
 </a>

 <div class="soms-nav-section">서비스 관리</div>
 <a class="soms-navlink {% if request.endpoint and request.endpoint.startswith('sr.') %}is-active{% endif %}"
 href="{{ url_for('sr.list_sr') }}">
 <span>SR 관리</span>
 </a>

 <div class="soms-nav-section">작업 관리</div>
 <a class="soms-navlink {% if request.endpoint and request.endpoint.startswith('work.') %}is-active{% endif %}"
 href="{{ url_for('work.list_work') }}">
 <span>작업 관리</span>
 </a>
 <a class="soms-navlink {% if request.endpoint and request.endpoint.startswith('schedule.') %}is-active{% endif %}"
 href="{{ url_for('schedule.index') }}">
 <span>작업 일정</span>
 </a>

 <div class="soms-nav-section">고객</div>
 <a class="soms-navlink {% if request.endpoint and request.endpoint.startswith('customers.') %}is-active{% endif %}"
 href="{{ url_for('customers.list_customers') }}">
 <span>고객 조회</span>
 </a>

 <div class="soms-nav-section">Account</div>
 <a class="soms-navlink" href="{{ url_for('auth.logout') }}">
 <span>Logout</span>
 <span class="soms-nav-badge">
 {% if current_user.is_authenticated %}{{ current_user.user_id }}{% endif %}
 </span>
 </a>
 </nav>
 </aside>

 <main class="flex-grow-1 soms-main">
 <header class="soms-topbar">
 <div class="container-fluid py-2 d-flex align-items-center justify-content-between">
 <form class="d-flex gap-2" method="get" action="{{ url_for('customers.list_customers') }}">
 <input class="form-control form-control-sm" name="q" placeholder="고객 검색" value="{{ request.args.get('q','') }}">
 <button class="btn btn-sm btn-primary" type="submit">Search</button>
 </form>
 <div class="small text-muted">
 {% if current_user.is_authenticated %}
 {{ current_user.user_name }} ({{ current_user.user_id }})
 {% endif %}
 </div>
 </div>
 </header>

 <div class="container-fluid px-4 soms-content">
 <div class="soms-shell">
 {% include "shared/_flash.html" %}
 {% block content %}{% endblock %}
 </div>
 </div>
 </main>
 </div>

 <!-- Bootstrap JS (bundle includes Popper) -->
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
 <!-- jQuery (Select2 requires jQuery) -->
 <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
 <!-- Select2 (jQuery 다음) -->
 <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
 <!-- App JS -->
 <script src="{{ url_for('static', filename='js/soms.js') }}"></script>
</body>
</html>
